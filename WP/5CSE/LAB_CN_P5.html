<!DOCTYPE html>
<html lang="en">
<head>
<!--Infolinks script -->
<script type="text/javascript">
var infolinks_pid = 3211351;
var infolinks_wsid = 0;
</script>
<script type="text/javascript" src="//resources.infolinks.com/js/infolinks_main.js"></script>
 

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-146647335-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-146647335-1');
</script>
<title> CN LAB Program 5 </title>
<meta name="google-site-verification" content="google0186c8ef8f3bf22a.html">
<!-- indexing -->
<meta name="description" content="Computer Network LABORATORY Program 5 - Implement and study the performance of GSM on NS2/NS3 (Using MAC layer) or
equivalent environment   ">

<meta name="keywords" content="17CSL57,COMPUTER NETWORK LABORATORY,Using TCP/IP sockets,CN LAB PROGRAM 5, TCL 5, CN 5 LAB,
Implement and study the performance of GSM on NS2/NS3 (Using MAC layer) or
equivalent environment,
" />
<meta name="author" content="K B HEMANTH RAJ">



<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/ico" href="/FutureVisionBIE/logo.png" />

<link rel="stylesheet" href="https://hemanthrajhemu.github.io/FutureVisionBIE/style.css"/>
<!--<link rel="stylesheet" href="file:///C:/Users/ADMIN/Documents/GitHub/FutureVisionBIE/style.css"/>-->


</head>
<body>
<div id="main">
<!-- HEADER NAME WITH LOGO  -->
<header>
   <h1 class="FVBIE"><a href="https://hemanthrajhemu.github.io"><img src="/FutureVisionBIE/logo.png" alt="Future Vision BIE" style="float:left ;width:170px;height:140px;"></a>
   Future Vision BIE</h1><br/> <h1 class="FVBIE1">ONE STOP FOR ALL STUDY MATERIALS & LAB PROGRAMS</h1><br/>
   
</header>
<!-- TOP NAVIGATION TOOLS -->
<div class="topnav">
  
  <a class="openbtn" onclick="openNav()" style="font-family:courier; font-size:25px; text-align:center;">
	<img src="https://hemanthrajhemu.github.io/FutureVisionBIE/menu.png" alt="E" style="width:38px;height:38px;"/>
	MENU
  </a>
  <a href="https://bit.ly/FVBIESHARE" style="float:right;" >
				<img src="https://hemanthrajhemu.github.io/FutureVisionBIE/web.png" alt="Whatsapp Share" style="float:right; width:80px;height:40px;"/>
  </a>
  <a href="https://t.me/joinchat/AAAAAFTtp8kuvCHALxuMaQ" style="float:right;">Join Telegram, to get Instant Updates</a>

</div>
<!--  NAVIGATION TOOLS -->
<div id="mySidebar" class="sidebar">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">
		<img src="https://hemanthrajhemu.github.io/FutureVisionBIE/cancel-64.png" alt="X" style="width:64px;height:64px;"/>
	</a><br/>
  
<a href="https://hemanthrajhemu.github.io/FutureVisionBIE/disclaimer.html">Disclaimer</a>
    
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/JavaHtml/java.html">4th sem <br/>Java-DAA Programs</a>
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE">5th sem CSE</br>Text Book</br>Programs</br></a>
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/M&T.html">17CS51 -<br/> MANAGEMENT AND ENTREPRENEURSHIP FOR IT INDUSTRY</a>
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/CN.html"> 17CS52 -<br/> COMPUTER NETWORKS</a>
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/DBMS.html"> 17CS53 -<br/> DATABASE MANAGEMENT SYSTEM</a>
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/ATC.html">17CS54 -<br/> AUTOMATA THEORY AND COMPUTABILITY</a>
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/AVD_JAVA.html">17CS553  -<br/> ADVANCED JAVA AND J2EE</a>
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/AI.html">17CS562 -<br/> ARTIFICIAL INTELLIGENCE</a>
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/LAB_CN.html">17CSL57 -<br/> COMPUTER NETWORK LABORATORY</a>
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/LAB_DBMS.html">17CSL58 -<br/> DBMS LABORATORY WITH MINI PROJECT</a>
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/AVD_ALGO.html">17CS554 - ADVANCED ALGORITHMS </a>
    
	</br></br></br></br></br></br></br></br></br></br></br></br>
	
	<a href="https://hemanthrajhemu.github.io/FutureVisionBIE/contact.html">CONTACT</a>
	<a href="https://hemanthrajhemu.github.io/FutureVisionBIE/">HOME</a></br></br></br></br>
</div>
<!-- CENTER PATH FOR INFO  -->
<article>
	<div class="alertA1">
	  <span class="closebtnA1" onclick="this.parentElement.style.display='none';">&times;</span> 
	  <strong>NOTE!</strong>
	  Click on MENU to Browse between Subjects...
	</div>
	




<hr/>
<div class="ads" id="ads" align="center">
Advertisement
<!-- Infolinks In-Article-Ad -->
<input type="hidden" name="IL_IN_ARTICLE">
</div>
<hr/>



<div class="desp"> 
 <h1><p style="text-align:center;"> 
 17CSL57 <br/>
COMPUTER NETWORK LABORATORY<br/>
[As per Choice Based Credit System (CBCS) scheme]<br/>
(Effective from the academic year 2017-2018)<br/>
SEMESTER - V<br/>
<br/>
</h1>
</p></div>
<hr/>
 
<hr/>
<div class="desp">
<h1>
<p>
This Page Provides Program & Output.<br/>
Program 5<br/>
</p>
</h1>
</div>

<div class="desp">
<h1>
<p>
Program 5 <br/>
Implement and study the performance of GSM on NS2/NS3 (Using MAC layer) or
equivalent environment.<br/>
</p>
</h1>
</div><br/><br/>

 



<hr/>
<div class="ads" id="ads" align="center">
Advertisement
<!-- Infolinks In-Tag-Ad -->
<input type="hidden" name="IL_IN_TAG" value="2"/>
</div>
<hr/>



<hr/>
<!-- CODE  -->

<h1 class="head">5.tcl</h1>

<!-- HTML generated using hilite.me --><div class="JCODE" style="background: #4a3a3a; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0;color:#f2c2c2; line-height: 125%"> 1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #f8f8f2">puts</span> <span style="color: #e6db74">&quot;Enter number of nodes&quot;</span>
<span style="color: #66d9ef">set</span> tnn <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">gets</span> stdin<span style="color: #66d9ef">]</span>
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">chan</span><span style="color: #66d9ef">)</span> 	Channel<span style="color: #f92672">/</span>WirelessChannel
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">prop</span><span style="color: #66d9ef">)</span> 	Propagation<span style="color: #f92672">/</span>TwoRayGround
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">netif</span><span style="color: #66d9ef">)</span> 	Phy<span style="color: #f92672">/</span>WirelessPhy
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">mac</span><span style="color: #66d9ef">)</span> 	Mac<span style="color: #f92672">/</span><span style="color: #ae81ff">802</span>_11
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">ifq</span><span style="color: #66d9ef">)</span> 	Queue<span style="color: #f92672">/</span>DropTail<span style="color: #f92672">/</span>PriQueue
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">ll</span><span style="color: #66d9ef">)</span> 	LL
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">ant</span><span style="color: #66d9ef">)</span>  	Antenna<span style="color: #f92672">/</span>OmniAntenna
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">x</span><span style="color: #66d9ef">)</span>	       <span style="color: #ae81ff">1500</span><span style="color: #66d9ef">;</span><span style="color: #75715e">#add manually</span>
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">y</span><span style="color: #66d9ef">)</span>	       <span style="color: #ae81ff">1500</span><span style="color: #66d9ef">;</span><span style="color: #75715e">#add manually</span>
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">ifqlen</span><span style="color: #66d9ef">)</span>        <span style="color: #ae81ff">1000</span><span style="color: #66d9ef">;</span><span style="color: #75715e">#add manually</span>
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">adhocRouting</span><span style="color: #66d9ef">)</span> AODV<span style="color: #66d9ef">;</span><span style="color: #75715e">#add manually</span>
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">nn</span><span style="color: #66d9ef">)</span>  <span style="color: #f8f8f2">$tnn</span>
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">stop</span><span style="color: #66d9ef">)</span> <span style="color: #ae81ff">10.0</span>
<span style="color: #75715e">#add manually</span>
<span style="color: #f8f8f2">Mac</span><span style="color: #f92672">/</span><span style="color: #ae81ff">802</span>_11 set cdma_code_bw_start_ <span style="color: #ae81ff">0</span><span style="color: #66d9ef">;</span><span style="color: #75715e"># cdma code for bw request (start)</span>
<span style="color: #f8f8f2">Mac</span><span style="color: #f92672">/</span><span style="color: #ae81ff">802</span>_11 set cdma_code_bw_stop_  <span style="color: #ae81ff">63</span><span style="color: #66d9ef">;</span><span style="color: #75715e"># cdma code for bw request (stop)</span>
<span style="color: #f8f8f2">Mac</span><span style="color: #f92672">/</span><span style="color: #ae81ff">802</span>_11 set cdma_code_init_start_ <span style="color: #ae81ff">64</span><span style="color: #66d9ef">;</span><span style="color: #75715e"># cdma code for initial request (start)</span>
<span style="color: #f8f8f2">Mac</span><span style="color: #f92672">/</span><span style="color: #ae81ff">802</span>_11 set cdma_code_init_stop_   <span style="color: #ae81ff">127</span><span style="color: #66d9ef">;</span><span style="color: #75715e"># cdma code for initial request (stop)</span>
<span style="color: #f8f8f2">Mac</span><span style="color: #f92672">/</span><span style="color: #ae81ff">802</span>_11 set cdma_code_cqich_start_ <span style="color: #ae81ff">128</span> <span style="color: #66d9ef">;</span><span style="color: #75715e"># cdma code for cqich request (start)</span>
<span style="color: #f8f8f2">Mac</span><span style="color: #f92672">/</span><span style="color: #ae81ff">802</span>_11 set cdma_code_cqich_stop_   <span style="color: #ae81ff">195</span><span style="color: #66d9ef">;</span><span style="color: #75715e"># cdma code for cqich request (stop)</span>
<span style="color: #f8f8f2">Mac</span><span style="color: #f92672">/</span><span style="color: #ae81ff">802</span>_11 set cdma_code_handover_start_ <span style="color: #ae81ff">196</span> <span style="color: #66d9ef">;</span><span style="color: #75715e"># cdma code for handover request (start)</span>
<span style="color: #f8f8f2">Mac</span><span style="color: #f92672">/</span><span style="color: #ae81ff">802</span>_11 set cdma_code_handover_stop_  <span style="color: #ae81ff">255</span><span style="color: #66d9ef">;</span><span style="color: #75715e"># cdma code for handover request (stop)</span>
<span style="color: #75715e">#end</span>
<span style="color: #66d9ef">set</span> f0 <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">open</span> out02.tr w<span style="color: #66d9ef">]</span>
<span style="color: #66d9ef">set</span> f1 <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">open</span> lost02.tr w<span style="color: #66d9ef">]</span>
<span style="color: #66d9ef">set</span> f2 <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">open</span> delay02.tr w<span style="color: #66d9ef">]</span>
<span style="color: #66d9ef">set</span> ns_ <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">new</span> Simulator<span style="color: #66d9ef">]</span>
<span style="color: #66d9ef">set</span> topo <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">new</span> Topography<span style="color: #66d9ef">]</span>
<span style="color: #66d9ef">set</span> tracefd <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">open</span> out.tr w<span style="color: #66d9ef">]</span>
<span style="color: #66d9ef">set</span> namtrace <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">open</span> out.nam w<span style="color: #66d9ef">]</span>

<span style="color: #f8f8f2">$ns_</span> <span style="color: #66d9ef">trace</span><span style="color: #f92672">-</span>all <span style="color: #f8f8f2">$tracefd</span>
<span style="color: #f8f8f2">$ns_</span> <span style="color: #f8f8f2">namtrace-all-wireless</span> <span style="color: #f8f8f2">$namtrace</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">x</span><span style="color: #66d9ef">)</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">y</span><span style="color: #66d9ef">)</span>
<span style="color: #f8f8f2">$topo</span> <span style="color: #f8f8f2">load_flatgrid</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">x</span><span style="color: #66d9ef">)</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">y</span><span style="color: #66d9ef">)</span>
<span style="color: #66d9ef">set</span> god_ <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">create-god</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">nn</span><span style="color: #66d9ef">)]</span>               
<span style="color: #f8f8f2">$ns_</span> color <span style="color: #ae81ff">0</span> red
<span style="color: #f8f8f2">$ns_</span> <span style="color: #f8f8f2">node-config</span> <span style="color: #f92672">-</span>adhocRouting AODV <span style="color: #960050; background-color: #1e0010">\</span>
<span style="color: #f8f8f2">-llType</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">ll</span><span style="color: #66d9ef">)</span> <span style="color: #960050; background-color: #1e0010">\</span>
<span style="color: #f8f8f2">-macType</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">mac</span><span style="color: #66d9ef">)</span> <span style="color: #960050; background-color: #1e0010">\</span>
<span style="color: #f8f8f2">-ifqType</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">ifq</span><span style="color: #66d9ef">)</span> <span style="color: #960050; background-color: #1e0010">\</span>
<span style="color: #f8f8f2">-ifqLen</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">ifqlen</span><span style="color: #66d9ef">)</span> <span style="color: #960050; background-color: #1e0010">\</span>
<span style="color: #f8f8f2">-antType</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">ant</span><span style="color: #66d9ef">)</span> <span style="color: #960050; background-color: #1e0010">\</span><span style="color: #f92672">-</span>propType <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">prop</span><span style="color: #66d9ef">)</span> <span style="color: #960050; background-color: #1e0010">\</span>
<span style="color: #f8f8f2">-phyType</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">netif</span><span style="color: #66d9ef">)</span> <span style="color: #960050; background-color: #1e0010">\</span>
<span style="color: #f8f8f2">-channelType</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">chan</span><span style="color: #66d9ef">)</span> <span style="color: #960050; background-color: #1e0010">\</span>
<span style="color: #f8f8f2">-energyModel</span> EnergyModel <span style="color: #960050; background-color: #1e0010">\</span>
<span style="color: #f8f8f2">-initialEnergy</span> <span style="color: #ae81ff">100</span> <span style="color: #960050; background-color: #1e0010">\</span>
<span style="color: #f8f8f2">-rxPower</span> <span style="color: #ae81ff">0.3</span> <span style="color: #960050; background-color: #1e0010">\</span>
<span style="color: #f8f8f2">-txPower</span> <span style="color: #ae81ff">0.6</span> <span style="color: #960050; background-color: #1e0010">\</span>
<span style="color: #f8f8f2">-topoInstance</span> <span style="color: #f8f8f2">$topo</span> <span style="color: #960050; background-color: #1e0010">\</span>
<span style="color: #f8f8f2">-agentTrace</span> ON <span style="color: #960050; background-color: #1e0010">\</span>
<span style="color: #f8f8f2">-routerTrace</span> ON <span style="color: #960050; background-color: #1e0010">\</span>
<span style="color: #f8f8f2">-macTrace</span> OFF
<span style="color: #75715e">#add manually</span>
<span style="color: #66d9ef">for</span> <span style="color: #66d9ef">{set</span> i <span style="color: #ae81ff">0</span><span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span><span style="color: #f8f8f2">$i</span> <span style="color: #f92672">&lt;</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">nn</span><span style="color: #66d9ef">)</span> <span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span><span style="color: #f8f8f2">incr</span> i<span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span>
<span style="color: #66d9ef">set</span> node_<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">$i</span><span style="color: #66d9ef">)</span> <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">$ns_</span> <span style="color: #f8f8f2">node</span><span style="color: #66d9ef">]</span>
<span style="color: #f8f8f2">$node_</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">$i</span><span style="color: #66d9ef">)</span> <span style="color: #66d9ef">set</span> X_ <span style="color: #66d9ef">[expr</span> rand<span style="color: #66d9ef">()</span> <span style="color: #f92672">*</span> <span style="color: #ae81ff">500</span><span style="color: #66d9ef">]</span>
<span style="color: #f8f8f2">$node_</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">$i</span><span style="color: #66d9ef">)</span> <span style="color: #66d9ef">set</span> Y_ <span style="color: #66d9ef">[expr</span> rand<span style="color: #66d9ef">()</span> <span style="color: #f92672">*</span> <span style="color: #ae81ff">500</span><span style="color: #66d9ef">]</span>
<span style="color: #f8f8f2">$node_</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">$i</span><span style="color: #66d9ef">)</span> <span style="color: #66d9ef">set</span> Z_ <span style="color: #ae81ff">0.000000000000</span><span style="color: #66d9ef">;</span>
<span style="color: #66d9ef">}</span>
<span style="color: #66d9ef">for</span> <span style="color: #66d9ef">{set</span> i <span style="color: #ae81ff">0</span><span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span><span style="color: #f8f8f2">$i</span> <span style="color: #f92672">&lt;</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">nn</span><span style="color: #66d9ef">)</span> <span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span><span style="color: #f8f8f2">incr</span> i<span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span>
<span style="color: #66d9ef">set</span> xx <span style="color: #66d9ef">[expr</span> rand<span style="color: #66d9ef">()</span> <span style="color: #f92672">*</span> <span style="color: #ae81ff">1500</span><span style="color: #66d9ef">]</span>
<span style="color: #66d9ef">set</span> yy <span style="color: #66d9ef">[expr</span> rand<span style="color: #66d9ef">()</span> <span style="color: #f92672">*</span> <span style="color: #ae81ff">1000</span><span style="color: #66d9ef">]</span>
<span style="color: #f8f8f2">$ns_</span> <span style="color: #f8f8f2">at</span> <span style="color: #ae81ff">0.1</span> <span style="color: #e6db74">&quot;$node_($i) setdest $xx 4yy 5&quot;</span>
<span style="color: #66d9ef">}</span>
<span style="color: #f8f8f2">puts</span> <span style="color: #e6db74">&quot;Loading connection pattern...&quot;</span>
<span style="color: #f8f8f2">puts</span> <span style="color: #e6db74">&quot;Loading scenario file...&quot;</span>
<span style="color: #66d9ef">for</span> <span style="color: #66d9ef">{set</span> i <span style="color: #ae81ff">0</span><span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span><span style="color: #f8f8f2">$i</span> <span style="color: #f92672">&lt;</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">nn</span><span style="color: #66d9ef">)</span> <span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span><span style="color: #f8f8f2">incr</span> i<span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span>
<span style="color: #f8f8f2">$ns_</span> <span style="color: #f8f8f2">initial_node_pos</span> <span style="color: #f8f8f2">$node_</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">$i</span><span style="color: #66d9ef">)</span> <span style="color: #ae81ff">55</span>
<span style="color: #66d9ef">}</span>
<span style="color: #66d9ef">for</span> <span style="color: #66d9ef">{set</span> i <span style="color: #ae81ff">0</span><span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span><span style="color: #f8f8f2">$i</span> <span style="color: #f92672">&lt;</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">nn</span><span style="color: #66d9ef">)</span> <span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span><span style="color: #f8f8f2">incr</span> i<span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span>
<span style="color: #f8f8f2">$ns_</span> <span style="color: #f8f8f2">at</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">stop</span><span style="color: #66d9ef">)</span>.0 <span style="color: #e6db74">&quot;$node_($i) reset&quot;</span><span style="color: #66d9ef">;</span>
<span style="color: #66d9ef">}</span>
<span style="color: #f8f8f2">puts</span> <span style="color: #e6db74">&quot;Enter source node&quot;</span>
<span style="color: #66d9ef">set</span> source <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">gets</span> stdin<span style="color: #66d9ef">]</span>
<span style="color: #f8f8f2">puts</span> <span style="color: #e6db74">&quot;Enter destination node&quot;</span>
<span style="color: #66d9ef">set</span> dest <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">gets</span> stdin<span style="color: #66d9ef">]</span>
<span style="color: #66d9ef">set</span> udp_<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">0</span><span style="color: #66d9ef">)</span> <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">new</span> Agent<span style="color: #f92672">/</span>UDP<span style="color: #66d9ef">]</span>
<span style="color: #f8f8f2">$ns_</span> <span style="color: #f8f8f2">attach-agent</span> <span style="color: #f8f8f2">$node_</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">$source</span><span style="color: #66d9ef">)</span> <span style="color: #f8f8f2">$udp_</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">0</span><span style="color: #66d9ef">)</span>
<span style="color: #66d9ef">set</span> sink <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">new</span> Agent<span style="color: #f92672">/</span>LossMonitor<span style="color: #66d9ef">]</span>
<span style="color: #f8f8f2">$ns_</span> <span style="color: #f8f8f2">attach-agent</span> <span style="color: #f8f8f2">$node_</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">$dest</span><span style="color: #66d9ef">)</span> <span style="color: #f8f8f2">$sink</span>
<span style="color: #66d9ef">set</span> cbr1_<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">0</span><span style="color: #66d9ef">)</span> <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">new</span> Application<span style="color: #f92672">/</span>Traffic<span style="color: #f92672">/</span>CBR<span style="color: #66d9ef">]</span>
<span style="color: #f8f8f2">$cbr1_</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">0</span><span style="color: #66d9ef">)</span> <span style="color: #66d9ef">set</span> packetSize_ <span style="color: #ae81ff">1000</span>
<span style="color: #f8f8f2">$cbr1_</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">0</span><span style="color: #66d9ef">)</span> <span style="color: #66d9ef">set</span> interval_ <span style="color: #ae81ff">0.1</span>
<span style="color: #f8f8f2">$cbr1_</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">0</span><span style="color: #66d9ef">)</span> <span style="color: #66d9ef">set</span> maxpkts_ <span style="color: #ae81ff">10000</span>
<span style="color: #f8f8f2">$cbr1_</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">0</span><span style="color: #66d9ef">)</span> <span style="color: #f8f8f2">attach-agent</span> <span style="color: #f8f8f2">$udp_</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">0</span><span style="color: #66d9ef">)</span>
<span style="color: #f8f8f2">$ns_</span> <span style="color: #f8f8f2">connect</span> <span style="color: #f8f8f2">$udp_</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">0</span><span style="color: #66d9ef">)</span> <span style="color: #f8f8f2">$sink</span>
<span style="color: #f8f8f2">$ns_</span> <span style="color: #f8f8f2">at</span> <span style="color: #ae81ff">1.00</span> <span style="color: #e6db74">&quot;$cbr1_(0) start&quot;</span>
<span style="color: #66d9ef">set</span> holdtime <span style="color: #ae81ff">0</span>
<span style="color: #66d9ef">set</span> holdseq <span style="color: #ae81ff">0</span>
<span style="color: #66d9ef">set</span> holdrate1 <span style="color: #ae81ff">0</span>
<span style="color: #66d9ef">proc</span> record <span style="color: #66d9ef">{}</span> <span style="color: #66d9ef">{</span>
<span style="color: #66d9ef">global</span> sink f0 f1 f2 holdtime holdseq holdrate1
<span style="color: #66d9ef">set</span> ns <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">Simulator</span> instance<span style="color: #66d9ef">]</span>
<span style="color: #66d9ef">set</span> time <span style="color: #ae81ff">0.9</span> <span style="color: #66d9ef">;</span><span style="color: #75715e">#Set Sampling Time to 0.9 Sec</span>
<span style="color: #66d9ef">set</span> bw0 <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">$sink</span> <span style="color: #66d9ef">set</span> bytes_<span style="color: #66d9ef">]</span>
<span style="color: #66d9ef">set</span> bw1 <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">$sink</span> <span style="color: #66d9ef">set</span> nlost_<span style="color: #66d9ef">]</span>
<span style="color: #66d9ef">set</span> bw2 <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">$sink</span> <span style="color: #66d9ef">set</span> lastPktTime_<span style="color: #66d9ef">]</span>
<span style="color: #66d9ef">set</span> bw3 <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">$sink</span> <span style="color: #66d9ef">set</span> npkts_<span style="color: #66d9ef">]</span>
<span style="color: #66d9ef">set</span> now <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">now</span><span style="color: #66d9ef">]</span>
<span style="color: #75715e"># Record Bit Rate in Trace Files</span>
<span style="color: #f8f8f2">puts</span> <span style="color: #f8f8f2">$f0</span> <span style="color: #e6db74">&quot;$now [expr (($bw0+$holdrate1)*8)/(2*$time*1000000)]&quot;</span>
<span style="color: #75715e"># Record Packet Loss Rate in File</span>
<span style="color: #f8f8f2">puts</span> <span style="color: #f8f8f2">$f1</span> <span style="color: #e6db74">&quot;$now [expr $bw1/$time]&quot;</span>
<span style="color: #66d9ef">if</span> <span style="color: #66d9ef">{</span> <span style="color: #f8f8f2">$bw3</span> <span style="color: #f92672">&gt;</span> <span style="color: #f8f8f2">$holdseq</span> <span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span>
<span style="color: #f8f8f2">puts</span> <span style="color: #f8f8f2">$f2</span> <span style="color: #e6db74">&quot;$now [expr ($bw2 - $holdtime)/($bw3 - $holdseq)]&quot;</span>
<span style="color: #66d9ef">}</span> <span style="color: #66d9ef">else</span> <span style="color: #66d9ef">{</span>
<span style="color: #f8f8f2">puts</span> <span style="color: #f8f8f2">$f2</span> <span style="color: #e6db74">&quot;$now [expr ($bw3 - $holdseq)]&quot;</span>
<span style="color: #66d9ef">}</span>
<span style="color: #f8f8f2">$sink</span> <span style="color: #66d9ef">set</span> bytes_ <span style="color: #ae81ff">0</span>
<span style="color: #f8f8f2">$sink</span> <span style="color: #66d9ef">set</span> nlost_ <span style="color: #ae81ff">0</span>
<span style="color: #66d9ef">set</span> holdtime <span style="color: #f8f8f2">$bw2</span>
<span style="color: #66d9ef">set</span> holdseq <span style="color: #f8f8f2">$bw3</span>
<span style="color: #66d9ef">set</span> holdrate1 <span style="color: #f8f8f2">$bw0</span>
<span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">at</span> <span style="color: #66d9ef">[expr</span> <span style="color: #f8f8f2">$now</span><span style="color: #f92672">+</span><span style="color: #f8f8f2">$time</span><span style="color: #66d9ef">]</span> <span style="color: #e6db74">&quot;record&quot;</span> <span style="color: #66d9ef">;</span><span style="color: #75715e"># Schedule Record after $time interval sec}</span>
<span style="color: #75715e">#end</span>
<span style="color: #75715e"># Start Recording at Time 0</span>
<span style="color: #f8f8f2">$ns_</span> <span style="color: #f8f8f2">at</span> <span style="color: #ae81ff">0.0</span> <span style="color: #e6db74">&quot;record&quot;</span>
<span style="color: #f8f8f2">source</span> link.tcl
<span style="color: #66d9ef">proc</span> stop <span style="color: #66d9ef">{}</span> <span style="color: #66d9ef">{</span>
<span style="color: #66d9ef">global</span> ns_ tracefd f0 f1 f2
<span style="color: #75715e"># Close Trace Files</span>
<span style="color: #f8f8f2">close</span> <span style="color: #f8f8f2">$f0</span>
<span style="color: #f8f8f2">close</span> <span style="color: #f8f8f2">$f1</span>
<span style="color: #f8f8f2">close</span> <span style="color: #f8f8f2">$f2</span>
<span style="color: #f8f8f2">exec</span> nam out.nam
<span style="color: #f8f8f2">exec</span> xgraph out02.tr <span style="color: #f92672">-</span>geometry <span style="color: #f92672">-</span>x TIME <span style="color: #f92672">-</span>y thr <span style="color: #f92672">-</span>t Throughput <span style="color: #ae81ff">800</span>x400 <span style="color: #f92672">&amp;</span>
<span style="color: #f8f8f2">exec</span> xgraph lost02.tr <span style="color: #f92672">-</span>geometry <span style="color: #f92672">-</span>x TIME <span style="color: #f92672">-</span>y loss <span style="color: #f92672">-</span>t Packet_loss <span style="color: #ae81ff">800</span>x400 <span style="color: #f92672">&amp;</span>
<span style="color: #f8f8f2">exec</span> xgraph delay02.tr <span style="color: #f92672">-</span>geometry <span style="color: #f92672">-</span>x TIME <span style="color: #f92672">-</span>y delay <span style="color: #f92672">-</span>t End-to-End-Delay <span style="color: #ae81ff">800</span>x400 <span style="color: #f92672">&amp;</span>
<span style="color: #f8f8f2">$ns_</span> <span style="color: #f8f8f2">flush</span><span style="color: #f92672">-</span>trace
<span style="color: #66d9ef">}</span>
<span style="color: #f8f8f2">$ns_</span> <span style="color: #f8f8f2">at</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">stop</span><span style="color: #66d9ef">)</span> <span style="color: #e6db74">&quot;stop&quot;</span>
<span style="color: #f8f8f2">$ns_</span> <span style="color: #f8f8f2">at</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">stop</span><span style="color: #66d9ef">)</span>.0002 <span style="color: #e6db74">&quot;puts \&quot;NS EXITING...\&quot; ; $ns_ halt&quot;</span>
<span style="color: #f8f8f2">puts</span> <span style="color: #f8f8f2">$tracefd</span> <span style="color: #e6db74">&quot;M 0.0 nn $val(nn) x $val(x) y $val(y) rp &quot;</span>
<span style="color: #f8f8f2">puts</span> <span style="color: #f8f8f2">$tracefd</span> <span style="color: #e6db74">&quot;M 0.0 prop $val(prop) ant $val(ant)&quot;</span>
<span style="color: #f8f8f2">puts</span> <span style="color: #e6db74">&quot;Starting Simulation...&quot;</span>
<span style="color: #f8f8f2">$ns_</span> <span style="color: #f8f8f2">run</span>
</pre></td></tr></table></div>






<hr/>		
 	
<hr/>	
<!-- CODE  -->

<h1 class="head">link.tcl</h1>

<!-- HTML generated using hilite.me --><div class="JCODE" style="background: #4a3a3a; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0;color:#f2c2c2; line-height: 125%"> 1
2
3
4
5</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #f8f8f2">$ns_</span> <span style="color: #f8f8f2">at</span> <span style="color: #ae81ff">0.5</span> <span style="color: #e6db74">&quot;$node_($source) add-mark m blue square&quot;</span> 
<span style="color: #f8f8f2">$ns_</span> at <span style="color: #ae81ff">0.5</span> <span style="color: #e6db74">&quot;$node_($dest) add-mark m magenta square&quot;</span>
<span style="color: #f8f8f2">$ns_</span> <span style="color: #f8f8f2">at</span> <span style="color: #ae81ff">0.5</span> <span style="color: #e6db74">&quot;$node_($source) label SENDER&quot;</span> 
<span style="color: #f8f8f2">$ns_</span> at <span style="color: #ae81ff">0.5</span> <span style="color: #e6db74">&quot;$node_($dest) label RECEIVER&quot;</span>
<span style="color: #f8f8f2">$ns_</span> <span style="color: #f8f8f2">at</span> <span style="color: #ae81ff">0.01</span> <span style="color: #e6db74">&quot;$ns_ trace-annotate \&quot;Network Deployment\&quot;&quot;</span>
</pre></td></tr></table></div>





<hr/>
<br/>
<div class="down">
<a href="http://hemanthrajhemu.github.io\FutureVisionBIE\DOWNLOAD\CN_LAB_PRO5.zip"
   download>Download the Program with Output</a></div>

<hr/>


<h1 class="head">Process to Execute the Program</h1>
<div class="proc">
	<p>
	Step 1: We need to have ns2 pre installed<br/>
	Step 2: Head to Cmd<br/>
	Step 3: Navigate to file saved using cd & ls command<br/>
	Step 4: ns 5.tcl<br/>
	Step 5: Note both 5.tcl & link.tcl file is required<br/>
	
	
	
	<center><img src="http://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/SC_LAB_CN/pro5/5.1.png" 
alt="output" class="resIMG"/><br/>Fig 5.1: Output </center><br/>
	
	

	
	<center><img src="http://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/SC_LAB_CN/pro5/5.2.png" 
alt="output" class="resIMG"/><br/>Fig 5.2: Output </center><br/>
	
	

	
	<center><img src="http://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/SC_LAB_CN/pro5/5.3.png" 
alt="output" class="resIMG"/><br/>Fig 5.3: Output </center><br/>
	
	

	
	<center><img src="http://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/SC_LAB_CN/pro5/5.4.png" 
alt="output" class="resIMG"/><br/>Fig 5.4: Output</center><br/>
	
	

	
	<center><img src="http://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/SC_LAB_CN/pro5/5.5.png" 
alt="output" class="resIMG"/><br/>Fig 5.5: Output</center><br/>
	
	

	
	
	
	Step 6: Check the output.
	</p>

</div>


<!-- CONTENT AFTER LINK  -->





    <div class="alertA1">
  <span class="closebtnA1" onclick="this.parentElement.style.display='none';">&times;</span> 
  <strong>Note</strong> 
	Please Share the website link with Your Friends and known Students...<br/><br/> -ADMIN
    </div>
	<br/>
<div class="alertA1">
  <span class="closebtnA1" onclick="this.parentElement.style.display='none';">&times;</span> 
  <strong>Note</strong> 
	Page Number is specified to navigate between Pages...<br/>T = Text book<br/>QB = Question Bank<br/>AS = Answer Script
	<br/><br/>-ADMIN
</div>





 <hr/>
 
<br/><br/>
</article>

<footer>Copyright By Future Vision BIE 2018-2019 </footer>

</div>
</body>
</html>