<!DOCTYPE html>
<html>
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-146647335-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-146647335-1');
</script>
<title> CN LAB Program 4 </title>
<meta name="google-site-verification" content="google0186c8ef8f3bf22a.html">
<!-- indexing -->
<meta name="description" content="Computer Network LABORATORY Program 4 - Implement simple ESS and with transmitting nodes in wire-less LAN by simulation
and determine the performance with respect to transmission of packets.  ">

<meta name="keywords" content="17CSL57,COMPUTER NETWORK LABORATORY,Using TCP/IP sockets,CN LAB PROGRAM 4, TCL 4, CN 4 LAB,
Implement simple ESS and with transmitting nodes in wire-less LAN by simulation
and determine the performance with respect to transmission of packets.,
" />
<meta name="author" content="K B HEMANTH RAJ">



<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/ico" href="/FutureVisionBIE/logo.png" />

<link rel="stylesheet" href="https://hemanthrajhemu.github.io/FutureVisionBIE/style.css"/>
<!--<link rel="stylesheet" href="file:///C:/Users/ADMIN/Documents/GitHub/FutureVisionBIE/style.css"/>-->


</head>
<body onload="myFunction1()" style="margin:0;">
<script src="https://hemanthrajhemu.github.io/FutureVisionBIE/script.js">        </script>
<div id="loader"></div>
<div style="display:none;" id="myDiv" class="animate-bottom">
<div id="main">
<div class="container">
<!-- HEADER NAME WITH LOGO  -->
<header>
   <h1 class="FVBIE"><a href="https://hemanthrajhemu.github.io"><img src="/FutureVisionBIE/logo.png" alt="Future Vision BIE" style="float:left ;width:170px;height:140px;"></a>
   Future Vision BIE</h1><br/> <h1 class="FVBIE1">ONE STOP FOR ALL STUDY MATERIALS & LAB PROGRAMS</h1><br/>
   
</header>
<!-- TOP NAVIGATION TOOLS -->
<div class="topnav">
  
  <a class="openbtn" onclick="openNav()" style="font-family:courier; font-size:25px; text-align:center;">
	<img src="https://hemanthrajhemu.github.io/FutureVisionBIE/menu.png" alt="E" style="width:38px;height:38px;"/>
	MENU
  </a>
  <a href="https://bit.ly/FVBIESHARE" style="float:right;" >
				<img src="https://hemanthrajhemu.github.io/FutureVisionBIE/web.png" alt="Whatsapp Share" style="float:right; width:80px;height:40px;"/>
  </a>
  <a href="https://t.me/joinchat/AAAAAFTtp8kuvCHALxuMaQ" style="float:right;">Join Telegram, to get Instant Updates</a>

</div>
<!--  NAVIGATION TOOLS -->
<div id="mySidebar" class="sidebar">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">
		<img src="https://hemanthrajhemu.github.io/FutureVisionBIE/cancel-64.png" alt="X" style="width:64px;height:64px;"/>
	</a><br/>
  
<a href="https://hemanthrajhemu.github.io/FutureVisionBIE/disclaimer.html">Disclaimer</a>
    
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/JavaHtml/java.html">4th sem <br/>Java-DAA Programs</a>
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE">5th sem CSE</br>Text Book</br>Programs</br></a>
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/M&T.html">17CS51 -<br/> MANAGEMENT AND ENTREPRENEURSHIP FOR IT INDUSTRY</a>
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/CN.html"> 17CS52 -<br/> COMPUTER NETWORKS</a>
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/DBMS.html"> 17CS53 -<br/> DATABASE MANAGEMENT SYSTEM</a>
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/ATC.html">17CS54 -<br/> AUTOMATA THEORY AND COMPUTABILITY</a>
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/AVD_JAVA.html">17CS553  -<br/> ADVANCED JAVA AND J2EE</a>
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/AI.html">17CS562 -<br/> ARTIFICIAL INTELLIGENCE</a>
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/LAB_CN.html">17CSL57 -<br/> COMPUTER NETWORK LABORATORY</a>
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/LAB_DBMS.html">17CSL58 -<br/> DBMS LABORATORY WITH MINI PROJECT</a>
    <a href="https://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/AVD_ALGO.html">17CS554 - ADVANCED ALGORITHMS </a>
    
	</br></br></br></br></br></br></br></br></br></br></br></br>
	
	<a href="https://hemanthrajhemu.github.io/FutureVisionBIE/contact.html">CONTACT</a>
	<a href="https://hemanthrajhemu.github.io/FutureVisionBIE/">HOME</a></br></br></br></br>
</div>
<!-- CENTER PATH FOR INFO  -->
<article>
	<div class="alertA1">
	  <span class="closebtnA1" onclick="this.parentElement.style.display='none';">&times;</span> 
	  <strong>NOTE!</strong>
	  Click on MENU to Browse between Subjects...
	</div>
	


<div class="desp"> 
 <h1><p style="text-align:center;"> 
 17CSL57 <br/>
COMPUTER NETWORK LABORATORY<br/>
[As per Choice Based Credit System (CBCS) scheme]<br/>
(Effective from the academic year 2017-2018)<br/>
SEMESTER - V<br/>
<br/>
</h1>
</p></div>

<div class="desp">
<h1>
<p>
This Page Provides Program & Output.<br/>
Program 4<br/>
</p>
</h1>
</div>

<div class="desp">
<h1>
<p>
Program 4 <br/>
Implement an Ethernet LAN using n nodes and set multiple traffic nodes and plot
congestion window for different source / destination.<br/>
</p>
</h1>
</div><br/><br/>

 

<hr/>
<!-- CODE  -->

<h1 class="head">4.tcl</h1>

<!-- HTML generated using hilite.me --><div class="JCODE" style="background: #4a3a3a; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0;color:#f2c2c2; line-height: 125%"> 1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #75715e"># This script is created by NSG2 beta1</span>
<span style="color: #75715e"># &lt;http://wushoupong.googlepages.com/nsg&gt;</span>
<span style="color: #66d9ef">if</span> <span style="color: #66d9ef">{</span><span style="color: #f8f8f2">$argc</span> <span style="color: #f92672">!=</span> <span style="color: #f8f8f2">1</span><span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span>
	<span style="color: #66d9ef">error</span> <span style="color: #e6db74">&quot;Commad: &lt;ScriptName&gt;.tcl &lt;Number_of_Nodes&gt;&quot;</span>
	<span style="color: #f8f8f2">exit</span> <span style="color: #ae81ff">0</span>
<span style="color: #66d9ef">}</span>
<span style="color: #75715e">#===================================</span>
<span style="color: #75715e">#     Simulation parameters setup</span>
<span style="color: #75715e">#===================================</span>
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">chan</span><span style="color: #66d9ef">)</span>   Channel<span style="color: #f92672">/</span>WirelessChannel    <span style="color: #66d9ef">;</span><span style="color: #75715e"># channel type</span>
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">prop</span><span style="color: #66d9ef">)</span>   Propagation<span style="color: #f92672">/</span>TwoRayGround   <span style="color: #66d9ef">;</span><span style="color: #75715e"># radio-propagation model</span>
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">netif</span><span style="color: #66d9ef">)</span>  Phy<span style="color: #f92672">/</span>WirelessPhy            <span style="color: #66d9ef">;</span><span style="color: #75715e"># network interface type</span>
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">mac</span><span style="color: #66d9ef">)</span>    Mac<span style="color: #f92672">/</span><span style="color: #ae81ff">802</span>_11                 <span style="color: #66d9ef">;</span><span style="color: #75715e"># MAC type</span>
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">ifq</span><span style="color: #66d9ef">)</span>    Queue<span style="color: #f92672">/</span>DropTail<span style="color: #f92672">/</span>PriQueue    <span style="color: #66d9ef">;</span><span style="color: #75715e"># interface queue type</span>
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">ll</span><span style="color: #66d9ef">)</span>     LL                         <span style="color: #66d9ef">;</span><span style="color: #75715e"># link layer type</span>
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">ant</span><span style="color: #66d9ef">)</span>    Antenna<span style="color: #f92672">/</span>OmniAntenna        <span style="color: #66d9ef">;</span><span style="color: #75715e"># antenna model</span>
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">ifqlen</span><span style="color: #66d9ef">)</span> <span style="color: #ae81ff">50</span>                         <span style="color: #66d9ef">;</span><span style="color: #75715e"># max packet in ifq</span>
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">nn</span><span style="color: #66d9ef">)</span>     <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">lindex</span> <span style="color: #f8f8f2">$argv</span> <span style="color: #ae81ff">0</span><span style="color: #66d9ef">]</span>            <span style="color: #66d9ef">;</span><span style="color: #75715e"># number of mobilenodes</span>
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">rp</span><span style="color: #66d9ef">)</span>     AODV                      <span style="color: #66d9ef">;</span><span style="color: #75715e"># routing protocol</span>
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">x</span><span style="color: #66d9ef">)</span>      <span style="color: #ae81ff">750</span>                      <span style="color: #66d9ef">;</span><span style="color: #75715e"># X dimension of topography</span>
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">y</span><span style="color: #66d9ef">)</span>      <span style="color: #ae81ff">750</span>                      <span style="color: #66d9ef">;</span><span style="color: #75715e"># Y dimension of topography</span>
<span style="color: #66d9ef">set</span> val<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">stop</span><span style="color: #66d9ef">)</span>   <span style="color: #ae81ff">100.0</span>                         <span style="color: #66d9ef">;</span><span style="color: #75715e"># time of simulation end</span>

<span style="color: #75715e">#===================================</span>
<span style="color: #75715e">#        Initialization        </span>
<span style="color: #75715e">#===================================</span>
<span style="color: #75715e">#Create a ns simulator</span>
<span style="color: #66d9ef">set</span> ns <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">new</span> Simulator<span style="color: #66d9ef">]</span>

<span style="color: #75715e">#Setup topography object</span>
<span style="color: #66d9ef">set</span> topo       <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">new</span> Topography<span style="color: #66d9ef">]</span>
<span style="color: #f8f8f2">$topo</span> <span style="color: #f8f8f2">load_flatgrid</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">x</span><span style="color: #66d9ef">)</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">y</span><span style="color: #66d9ef">)</span>
<span style="color: #f8f8f2">create-god</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">nn</span><span style="color: #66d9ef">)</span>

<span style="color: #75715e">#Open the NS trace file</span>
<span style="color: #66d9ef">set</span> tracefile <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">open</span> out.tr w<span style="color: #66d9ef">]</span>
<span style="color: #f8f8f2">$ns</span> <span style="color: #66d9ef">trace</span><span style="color: #f92672">-</span>all <span style="color: #f8f8f2">$tracefile</span>

<span style="color: #75715e">#Open the NAM trace file</span>
<span style="color: #66d9ef">set</span> namfile <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">open</span> out.nam w<span style="color: #66d9ef">]</span>
<span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">namtrace-all</span> <span style="color: #f8f8f2">$namfile</span>
<span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">namtrace-all-wireless</span> <span style="color: #f8f8f2">$namfile</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">x</span><span style="color: #66d9ef">)</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">y</span><span style="color: #66d9ef">)</span>
<span style="color: #66d9ef">set</span> chan <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">new</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">chan</span><span style="color: #66d9ef">)];</span><span style="color: #75715e">#Create wireless channel</span>

<span style="color: #75715e">#===================================</span>
<span style="color: #75715e">#     Mobile node parameter setup</span>
<span style="color: #75715e">#===================================</span>
<span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">node-config</span> <span style="color: #f92672">-</span>adhocRouting  <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">rp</span><span style="color: #66d9ef">)</span> <span style="color: #960050; background-color: #1e0010">\</span>
                <span style="color: #f8f8f2">-llType</span>        <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">ll</span><span style="color: #66d9ef">)</span> <span style="color: #960050; background-color: #1e0010">\</span>
                <span style="color: #f8f8f2">-macType</span>       <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">mac</span><span style="color: #66d9ef">)</span> <span style="color: #960050; background-color: #1e0010">\</span>
                <span style="color: #f8f8f2">-ifqType</span>       <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">ifq</span><span style="color: #66d9ef">)</span> <span style="color: #960050; background-color: #1e0010">\</span>
                <span style="color: #f8f8f2">-ifqLen</span>        <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">ifqlen</span><span style="color: #66d9ef">)</span> <span style="color: #960050; background-color: #1e0010">\</span>
                <span style="color: #f8f8f2">-antType</span>       <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">ant</span><span style="color: #66d9ef">)</span> <span style="color: #960050; background-color: #1e0010">\</span>
                <span style="color: #f8f8f2">-propType</span>      <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">prop</span><span style="color: #66d9ef">)</span> <span style="color: #960050; background-color: #1e0010">\</span>
                <span style="color: #f8f8f2">-phyType</span>       <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">netif</span><span style="color: #66d9ef">)</span> <span style="color: #960050; background-color: #1e0010">\</span>
                <span style="color: #f8f8f2">-channel</span>       <span style="color: #f8f8f2">$chan</span> <span style="color: #960050; background-color: #1e0010">\</span>
                <span style="color: #f8f8f2">-topoInstance</span>  <span style="color: #f8f8f2">$topo</span> <span style="color: #960050; background-color: #1e0010">\</span>
                <span style="color: #f8f8f2">-agentTrace</span>    ON <span style="color: #960050; background-color: #1e0010">\</span>
                <span style="color: #f8f8f2">-routerTrace</span>   ON <span style="color: #960050; background-color: #1e0010">\</span>
                <span style="color: #f8f8f2">-macTrace</span>      OFF <span style="color: #960050; background-color: #1e0010">\</span>
                <span style="color: #f8f8f2">-movementTrace</span> OFF

<span style="color: #75715e">#===================================</span>
<span style="color: #75715e">#        Nodes Definition        </span>
<span style="color: #75715e">#===================================</span>
<span style="color: #75715e">#add manually</span>
<span style="color: #66d9ef">for</span> <span style="color: #66d9ef">{set</span> i <span style="color: #ae81ff">0</span><span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span><span style="color: #f8f8f2">$i</span> <span style="color: #f92672">&lt;</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">nn</span><span style="color: #66d9ef">)}</span> <span style="color: #66d9ef">{</span><span style="color: #f8f8f2">incr</span> i<span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span>
	<span style="color: #66d9ef">set</span> n<span style="color: #66d9ef">(</span><span style="color: #f8f8f2">$i</span><span style="color: #66d9ef">)</span> <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">node</span><span style="color: #66d9ef">]</span>
<span style="color: #66d9ef">}</span>

<span style="color: #75715e">#Randomly placing the nodes</span>
<span style="color: #66d9ef">for</span> <span style="color: #66d9ef">{set</span> i <span style="color: #ae81ff">0</span><span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span><span style="color: #f8f8f2">$i</span> <span style="color: #f92672">&lt;</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">nn</span><span style="color: #66d9ef">)}</span> <span style="color: #66d9ef">{</span><span style="color: #f8f8f2">incr</span> i<span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span>
	<span style="color: #66d9ef">set</span> XX <span style="color: #66d9ef">[expr</span> rand<span style="color: #66d9ef">()</span><span style="color: #f92672">*</span><span style="color: #ae81ff">750</span><span style="color: #66d9ef">]</span>
	<span style="color: #66d9ef">set</span> YY <span style="color: #66d9ef">[expr</span> rand<span style="color: #66d9ef">()</span><span style="color: #f92672">*</span><span style="color: #ae81ff">750</span><span style="color: #66d9ef">]</span>
	<span style="color: #f8f8f2">$n</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">$i</span><span style="color: #66d9ef">)</span> <span style="color: #66d9ef">set</span> X_ <span style="color: #f8f8f2">$XX</span>
	<span style="color: #f8f8f2">$n</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">$i</span><span style="color: #66d9ef">)</span> <span style="color: #66d9ef">set</span> Y_ <span style="color: #f8f8f2">$YY</span> 
<span style="color: #66d9ef">}</span>

<span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">at</span> <span style="color: #ae81ff">0.0</span> <span style="color: #e6db74">&quot;destination&quot;</span>

<span style="color: #66d9ef">for</span> <span style="color: #66d9ef">{set</span> i <span style="color: #ae81ff">0</span><span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span><span style="color: #f8f8f2">$i</span> <span style="color: #f92672">&lt;</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">nn</span><span style="color: #66d9ef">)}</span> <span style="color: #66d9ef">{</span><span style="color: #f8f8f2">incr</span> i<span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span>
	<span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">initial_node_pos</span> <span style="color: #f8f8f2">$n</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">$i</span><span style="color: #66d9ef">)</span> <span style="color: #ae81ff">50</span>
<span style="color: #66d9ef">}</span>

<span style="color: #66d9ef">proc</span> destination <span style="color: #66d9ef">{}</span> <span style="color: #66d9ef">{</span>
	<span style="color: #66d9ef">global</span> ns val n
	<span style="color: #66d9ef">set</span> now <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">now</span><span style="color: #66d9ef">]</span>
	<span style="color: #66d9ef">set</span> time <span style="color: #ae81ff">3.0</span>
	<span style="color: #66d9ef">for</span> <span style="color: #66d9ef">{set</span> i <span style="color: #ae81ff">0</span><span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span><span style="color: #f8f8f2">$i</span> <span style="color: #f92672">&lt;</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">nn</span><span style="color: #66d9ef">)}</span> <span style="color: #66d9ef">{</span><span style="color: #f8f8f2">incr</span> i<span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span>
		<span style="color: #66d9ef">set</span> XX <span style="color: #66d9ef">[expr</span> rand<span style="color: #66d9ef">()</span><span style="color: #f92672">*</span><span style="color: #ae81ff">750</span><span style="color: #66d9ef">]</span>
		<span style="color: #66d9ef">set</span> YY <span style="color: #66d9ef">[expr</span> rand<span style="color: #66d9ef">()</span><span style="color: #f92672">*</span><span style="color: #ae81ff">750</span><span style="color: #66d9ef">]</span>
		<span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">at</span> <span style="color: #66d9ef">[expr</span> <span style="color: #f8f8f2">$now</span> <span style="color: #f92672">+</span> <span style="color: #f8f8f2">$time</span><span style="color: #66d9ef">]</span> <span style="color: #e6db74">&quot;$n($i) setdest $XX $YY 20.0&quot;</span>
	<span style="color: #66d9ef">}</span>
	<span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">at</span> <span style="color: #66d9ef">[expr</span> <span style="color: #f8f8f2">$now</span> <span style="color: #f92672">+</span> <span style="color: #f8f8f2">$time</span><span style="color: #66d9ef">]</span> <span style="color: #e6db74">&quot;destination&quot;</span>
<span style="color: #66d9ef">}</span>

<span style="color: #75715e">#end</span>
<span style="color: #75715e">#===================================</span>
<span style="color: #75715e">#        Agents Definition        </span>
<span style="color: #75715e">#===================================</span>
<span style="color: #75715e">#add manually</span>
<span style="color: #75715e">#Setup a TCP connection</span>
<span style="color: #66d9ef">set</span> tcp0 <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">new</span> Agent<span style="color: #f92672">/</span>TCP<span style="color: #66d9ef">]</span>
<span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">attach-agent</span> <span style="color: #f8f8f2">$n</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">0</span><span style="color: #66d9ef">)</span> <span style="color: #f8f8f2">$tcp0</span>
<span style="color: #66d9ef">set</span> sink1 <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">new</span> Agent<span style="color: #f92672">/</span>TCPSink<span style="color: #66d9ef">]</span>
<span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">attach-agent</span> <span style="color: #f8f8f2">$n</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">5</span><span style="color: #66d9ef">)</span> <span style="color: #f8f8f2">$sink1</span>
<span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">connect</span> <span style="color: #f8f8f2">$tcp0</span> <span style="color: #f8f8f2">$sink1</span>
<span style="color: #f8f8f2">$tcp0</span> <span style="color: #66d9ef">set</span> packetSize_ <span style="color: #ae81ff">1500</span>
<span style="color: #75715e">#end</span>

<span style="color: #75715e">#===================================</span>
<span style="color: #75715e">#        Applications Definition        </span>
<span style="color: #75715e">#===================================</span>
<span style="color: #75715e">#Setup a FTP Application over TCP connection</span>
<span style="color: #66d9ef">set</span> ftp0 <span style="color: #66d9ef">[</span><span style="color: #f8f8f2">new</span> Application<span style="color: #f92672">/</span>FTP<span style="color: #66d9ef">]</span>
<span style="color: #f8f8f2">$ftp0</span> <span style="color: #f8f8f2">attach-agent</span> <span style="color: #f8f8f2">$tcp0</span>
<span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">at</span> <span style="color: #ae81ff">1.0</span> <span style="color: #e6db74">&quot;$ftp0 start&quot;</span>



<span style="color: #75715e">#===================================</span>
<span style="color: #75715e">#        Termination        </span>
<span style="color: #75715e">#===================================</span>
<span style="color: #75715e">#Define a &#39;finish&#39; procedure</span>
<span style="color: #66d9ef">proc</span> finish <span style="color: #66d9ef">{}</span> <span style="color: #66d9ef">{</span>
    <span style="color: #66d9ef">global</span> ns tracefile namfile
    <span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">flush</span><span style="color: #f92672">-</span>trace
    <span style="color: #f8f8f2">close</span> <span style="color: #f8f8f2">$tracefile</span>
    <span style="color: #f8f8f2">close</span> <span style="color: #f8f8f2">$namfile</span>
    <span style="color: #f8f8f2">exec</span> nam out.nam <span style="color: #f92672">&amp;</span>
    <span style="color: #f8f8f2">exec</span> awk <span style="color: #f92672">-</span>f <span style="color: #ae81ff">4</span>.awk out.tr <span style="color: #f92672">&amp;</span>
    <span style="color: #f8f8f2">exit</span> <span style="color: #ae81ff">0</span>
<span style="color: #66d9ef">}</span>
<span style="color: #66d9ef">for</span> <span style="color: #66d9ef">{set</span> i <span style="color: #ae81ff">0</span><span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span><span style="color: #f8f8f2">$i</span> <span style="color: #f92672">&lt;</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">nn</span><span style="color: #66d9ef">)</span> <span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span> <span style="color: #f8f8f2">incr</span> i <span style="color: #66d9ef">}</span> <span style="color: #66d9ef">{</span>
    <span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">at</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">stop</span><span style="color: #66d9ef">)</span> <span style="color: #e6db74">&quot;$n($i) reset&quot;</span>
<span style="color: #66d9ef">}</span>
<span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">at</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">stop</span><span style="color: #66d9ef">)</span> <span style="color: #e6db74">&quot;$ns nam-end-wireless $val(stop)&quot;</span>
<span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">at</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">stop</span><span style="color: #66d9ef">)</span> <span style="color: #e6db74">&quot;finish&quot;</span>
<span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">at</span> <span style="color: #f8f8f2">$val</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">stop</span><span style="color: #66d9ef">)</span> <span style="color: #e6db74">&quot;puts \&quot;done\&quot; ; $ns halt&quot;</span>
<span style="color: #f8f8f2">$ns</span> <span style="color: #f8f8f2">run</span>
</pre></td></tr></table></div>





<hr/>
<hr/>
<!-- CODE  -->

<h1 class="head">4.awk</h1>

<!-- HTML generated using hilite.me --><div class="JCODE" style="background: #4a3a3a; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0;color:#f2c2c2; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #f8f8f2">BEGIN</span><span style="color: #66d9ef">{</span>
	<span style="color: #f8f8f2">PacketRcvd</span><span style="color: #960050; background-color: #1e0010">=</span><span style="color: #ae81ff">0</span><span style="color: #66d9ef">;</span>
	<span style="color: #f8f8f2">Throughput</span><span style="color: #960050; background-color: #1e0010">=</span><span style="color: #ae81ff">0.0</span><span style="color: #66d9ef">;</span>
<span style="color: #66d9ef">}</span>
<span style="color: #66d9ef">{</span>
	<span style="color: #66d9ef">if((</span><span style="color: #f8f8f2">$1</span><span style="color: #f92672">==</span><span style="color: #e6db74">&quot;r&quot;</span><span style="color: #66d9ef">)</span><span style="color: #f92672">&amp;&amp;</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">$3</span><span style="color: #f92672">==</span><span style="color: #e6db74">&quot;_5_&quot;</span><span style="color: #66d9ef">)</span><span style="color: #f92672">&amp;&amp;</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">$4</span><span style="color: #f92672">==</span><span style="color: #e6db74">&quot;AGT&quot;</span><span style="color: #66d9ef">)</span><span style="color: #f92672">&amp;&amp;</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">$7</span><span style="color: #f92672">==</span><span style="color: #e6db74">&quot;tcp&quot;</span><span style="color: #66d9ef">)</span><span style="color: #f92672">&amp;&amp;</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">$8</span><span style="color: #f92672">&gt;</span><span style="color: #f8f8f2">1000</span><span style="color: #66d9ef">))</span>
	<span style="color: #66d9ef">{</span>
		<span style="color: #f8f8f2">PacketRcvd</span><span style="color: #f92672">++</span><span style="color: #66d9ef">;</span>
	<span style="color: #66d9ef">}</span>
<span style="color: #66d9ef">}</span>
<span style="color: #f8f8f2">END</span> <span style="color: #66d9ef">{</span>
	<span style="color: #f8f8f2">Throughput</span><span style="color: #960050; background-color: #1e0010">=</span><span style="color: #66d9ef">((</span><span style="color: #f8f8f2">PacketRcvd</span><span style="color: #f92672">*</span><span style="color: #ae81ff">1500</span><span style="color: #f92672">*</span><span style="color: #ae81ff">8</span><span style="color: #66d9ef">)</span><span style="color: #f92672">/</span><span style="color: #66d9ef">(</span><span style="color: #f8f8f2">99.0</span><span style="color: #f92672">/</span><span style="color: #ae81ff">1000000</span><span style="color: #66d9ef">));</span>
	<span style="color: #f8f8f2">printf</span> <span style="color: #e6db74">&quot;the throughput is:%f\n&quot;</span><span style="color: #960050; background-color: #1e0010">,</span>Throughput<span style="color: #66d9ef">;</span>
<span style="color: #66d9ef">}</span>
</pre></td></tr></table></div>





<hr/>
<br/>
<div class="down">
<a href="http://hemanthrajhemu.github.io\FutureVisionBIE\DOWNLOAD\CN_LAB_PRO4.zip"
   download rel="noopener noreferrer" target="_blank">Download the Program with Output</a></div>

<hr/>


<h1 class="head">Process to Execute the Program</h1>
<div class="proc">
	<p>
	Step 1: We need to have ns2 pre installed<br/>
	Step 2: Head to Cmd<br/>
	Step 3: Navigate to file saved using cd & ls command<br/>
	Step 4: ns 4.tcl<br/>
	Step 5: Note both 4.tcl & 4.awk file is required<br/>
	
	
	
	<center><img src="http://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/SC_LAB_CN/pro4/4.1.png" 
alt="output" class="resIMG"/><br/>Fig 4.1: Output </center><br/>
	
	

	
	<center><img src="http://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/SC_LAB_CN/pro4/4.2.png" 
alt="output" class="resIMG"/><br/>Fig 4.2: Output </center><br/>
	
	

	
	<center><img src="http://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/SC_LAB_CN/pro4/4.3.png" 
alt="output" class="resIMG"/><br/>Fig 4.3: Output </center><br/>
	
	

	
	<center><img src="http://hemanthrajhemu.github.io/FutureVisionBIE/WP/5CSE/SC_LAB_CN/pro4/4.4.png" 
alt="output" class="resIMG"/><br/>Fig 4.4: Output</center><br/>
	
	

	
	
	
	Step 6: Check the output.
	</p>

</div>


<!-- CONTENT AFTER LINK  -->





    <div class="alertA1">
  <span class="closebtnA1" onclick="this.parentElement.style.display='none';">&times;</span> 
  <strong>Note</strong> 
	Please Share the website link with Your Friends and known Students...<br/><br/> -ADMIN
    </div>
	<br/>
<div class="alertA1">
  <span class="closebtnA1" onclick="this.parentElement.style.display='none';">&times;</span> 
  <strong>Note</strong> 
	Page Number is specified to navigate between Pages...<br/>T = Text book<br/>QB = Question Bank<br/>AS = Answer Script
	<br/><br/>-ADMIN
</div>





 <hr/>
 
<br/><br/>
</article>

<footer>Copyright By Future Vision BIE 2018-2019 </footer>

</div>
</div>
</div>
</body>
</html>